From 435ed5853b9451ab8fdfff722545c57a8f154625 Mon Sep 17 00:00:00 2001
From: Fabian Vogt <fabian@ritter-vogt.de>
Date: Sat, 18 Feb 2017 13:49:14 +0100
Subject: [PATCH] Defuse root block

While the main point is correct as any application running in the same
X session (not sandboxed) can use kate's capability to open a console,
we allow (even encourage) running YaST on X11 as root.
That way it's only an impact on usability.
---
 kate/main.cpp   | 3 +--
 kwrite/main.cpp | 3 +--
 2 files changed, 2 insertions(+), 4 deletions(-)

diff --git a/kate/main.cpp b/kate/main.cpp
index 342cd5db3..4845646aa 100644
--- a/kate/main.cpp
+++ b/kate/main.cpp
@@ -64,9 +64,8 @@ int main(int argc, char **argv)
      * Check whether we are running as root
      **/
     if (getuid() == 0) {
-        std::cout << "Executing Kate as root is not possible. To edit files as root use:" << std::endl;
+        std::cout << "THIS IS POTENTIALLY INSECURE!\nTo edit files as root please use:" << std::endl;
         std::cout << "SUDO_EDITOR=kate sudoedit <file>" << std::endl;
-        return 0;
     }
 #endif
     /**
diff --git a/kwrite/main.cpp b/kwrite/main.cpp
index 68a055edb..4937f72d3 100644
--- a/kwrite/main.cpp
+++ b/kwrite/main.cpp
@@ -54,9 +54,8 @@ extern "C" Q_DECL_EXPORT int main(int argc, char **argv)
      * Check whether we are running as root
      **/
     if (getuid() == 0) {
-        std::cout << "Executing KWrite as root is not possible. To edit files as root use:" << std::endl;
+        std::cout << "THIS IS POTENTIALLY INSECURE!\nTo edit files as root please use:" << std::endl;
         std::cout << "SUDO_EDITOR=kwrite sudoedit <file>" << std::endl;
-        return 0;
     }
 #endif
     /**
-- 
2.12.2


