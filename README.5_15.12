KDE5
====

Here is KDE 5_15.12 for Slackware, consisting of the KDE Frameworks 5.17.0,
Plasma 5.5.1 and Applications 15.12.0.

Upgrading from the previous 5_15.11 should be straight-forward.
KDE-5_15.12 is meant only to be installed on top of Slackware -current and
it will *replace* any version of KDE 4 you might have installed!

What is the NEWS in this batch of updates:
- Frameworks 5.17.0 is an enhancement release.
  See https://www.kde.org/announcements/kde-frameworks-5.17.0.php
- Plasma 5.5.1 is the first bugfix release of the 5.5 series.
  See https://www.kde.org/announcements/plasma-5.5.1.php . Plasma 5.5 ditched
  KDE's own TrueType font "oxygen-icons" in favor of Google's Noto font family.
  Support for legacy Xembed protocol is back and my "xembed-sni-proxy" package
  which I added a few releases earlier, is gone again from my repository 
  because its code is now part of Plasma itself.
  Network Manager applet supports WPA Enterprise now.
  A Breeze theme engine for GTK2+ applications was added.
- Applications 15.12.0 is a step further in maturing the KDE Frameworks 5 (KF5)
  ports of the KDE application collection.
  Highlight is the retirement of good old KSnapshot and the introduction of
  a brand new screenshot tool, Spectacle.
  Apart from KSnapshot, other packages have been removed as well: Amor, KTux
  (both unmaintained), and SuperKaramba (Plasma offers similar functionality).
  Several artwork collections are no longer shipped: kde-base-artwork,
  kde-wallpapers and kdeartwork. Do you need them back? Please tell me.

Further points of interest:
- kde/kde4-extragear packages should be taken from slackware-current (calligra,
  k3b, kaudiocreator, kplayer, kwebkitpart, oxygen-gtk2, kdevplatform,
  kdevelop-pg-qt, kdevelop, kdev-python, kdevelop-php, kdevelop-php-docs,
  skanlite, kio-mtp, libktorrent, ktorrent, partitionmanager)
- Lots of packages in the 'deps' department are completely new to Slackware.
  Since KDE 5 is built on Qt5 (KDE 4 had Qt4 as its base) you'll
  find many Qt5 related packages. Also, in order for Qt4 and GTK based
  applications to dock into the Plasma 5 system tray, more dependencies were
  needed. So, apart from updates to regular Slackware packages and the
  new telepathy support packages (see below), these are the new ones:
  OpenAL, PyQT5, cfitsio, json-glib, libappindicator, libdbusmenu-gtk,
  libdbusmenu-qt5, libindicator, lmdb, noto-font-ttf, noto-cjk-font-ttf,
  polkit-qt5-1, qca-qt5, qt-gstreamer, qt5, sni-qt, wayland and libxkbcommon.
- A completely new subset of "deps" packages, contained in their own
  "telepathy" subdirectory, needed for KDE Telepathy:
  libotr, libnice, farstream, libaccounts-glib, libaccounts-qt5,
  signon, signon-plugin-oauth2, signon-ui, libsignon-glib,
  telepathy-glib, telepathy-farstream, telepathy-haze, telepathy-gabble,
  telepathy-qt5, telepathy-logger, telepathy-logger-qt5,
  telepathy-mission-control and telepathy-accounts-signon.
- Telepathy for KDE packages are found in their own subdirectory kde/telepathy .

NOTE:
Also explained in more detail below, upgrading to this KDE 5 is non-trivial.
You will have to remove old KDE packages manually.  If you do not have KDE
installed at all, you will have to *install* some of Slackware's own KDE
packages manually.

NOTE:
If you decide to install these packages on top of a fresh installation of
  Slackware-current and have excluded all packages in the 'KDE' package series
  during installation, you will be missing several add-on packages, some of
  these are essential to the proper functioning of KDE!
  If you excluded the complete Slackware-current 'KDE' series, then you
  will have to install the following essential Slackware-current packages
  at a a minimum:
    * bluedevil
    * libktorrent
  And optionally install these Slackware-current packages as well:
    * amarok
    * calligra
    * k3b
    * kaudiocreator
    * kplayer
    * kwebkitpart
    * kdevplatform
    * kdevelop-pg-qt
    * kdevelop
    * kdev-python
    * kdevelop-php
    * kdevelop-php-docs
    * kio-mtp
    * ktorrent
    * oxygen-gtk2
    * partitionmanager
    * skanlite

-------------------------------------------------------------------------------
Building it all from source:
-------------------------------------------------------------------------------

Sources and scripts are separated from the packages in my 'ktown' repository.
If you want the sources for KDE 5, run the following command to download them:

  # rsync -av rsync://alien.slackbook.org/alien/ktown/source/5 .

There are a lot of 'dependencies' for KDE 5 which you'll have to compile and
install before attempting to compile KDE 5. Compiling and installing these
dependencies on Slackware-current is as easy as:
  # cd 5/deps
  # ./updates.SlackBuild
  # cd -

Be prepared to wait a *long* time since this will recompile Qt4 and compile a
new Qt5 package among others.  The finished package will be stored in /tmp .
Then if you want to compile the KDE packages on your computer, run:
  # cd 5/kde
  # ./KDE.SlackBuild

Wait a long time, and you will find the new packages in /tmp/kde-build .
Note that these packages will already have been installed by KDE.SlackBuild !

But if all you want is the packages I created, then you can skip all of that.

-------------------------------------------------------------------------------
Install pre-compiled packages:
-------------------------------------------------------------------------------

In order to install or upgrade KDE 5, follow these steps:

Make sure you are not running KDE or even X !  If you are running an X session,
log out first, and if you are in runlevel 4 (graphical login) you first have to
go back to runlevel 3 (console) by typing "init 3".

If you still have a KDE 4 installed, it must be removed first. No clean
upgrade path can be provided!  Do as follows:

If you have Slackware-current's default KDE 4.14.3 installed:
  # removepkg /var/log/packages/*-4.14.3-*
  # removepkg libkscreen
  # removepkg kscreen
  # removepkg kactivities
  # removepkg kde-workspace
  # removepkg libmm-qt
  # removepkg libnm-qt
  # removepkg plasma-nm
  # removepkg polkit-kde-agent-1
  # removepkg polkit-kde-kcmodules-1
  # removepkg kdeconnect-kde
...or instead of the above, simply '# slackpkg remove kde'.

If you have my 'ktown' set of KDE 5_15.11 installed:
- Upgrade to KDE-5_15.12
  Remove the packages that no longer exist in KDE 5_15.12:
  * removepkg xembed-sni-proxy
  * removepkg ktux
  * removepkg amor
  You may want to reconsider removing these, lots of old artwork in there:
  * removepkg kde-base-artwork
  * removepkg kde-wallpapers
  * removepkg kdeartwork

If you have my 'ktown' set of KDE 5_15.10 installed:
- Upgrade to KDE-5_15.11
  Then re-install original Slackware-current package that was removed
  from "deps" in KDE 5_15.11 (this will be easiest using slackpkg):
  * ConsoleKit2
  * eigen2
  * xapian-core
  Remove the package that no longer exists in KDE 5_15.11:
  * removepkg kdeconnect4

If you have my 'ktown' set of KDE 5_15.09_02 installed:
- No further actions are needed.

If you have my 'ktown' set of KDE 5_15.09 installed:
- Upgrade to KDE-5_15.09_02 and then remove the packages
  that no longer exist in KDE 5_15.09_02:
  * removepkg LoginKit

If you have my 'ktown' set of KDE 5_15.07 installed:
- Upgrade to KDE-5_15.09 and then remove the packages
  that no longer exist in KDE 5_15.09:
  * removepkg ConsoleKit
  * removepkg grantlee-qt5
  * removepkg kgamma
  * removepkg pairs

If you have my 'ktown' set of KDE 5_15.06 installed:
- No further actions are needed.

If you have my 'ktown' set of KDE 5_15.05 installed:
- Re-install the following 'ktown' packages:
  * kactivities-framework

If you have my 'ktown' set of KDE 5_15.04 installed:
- Remove packages that no longer exist in KDE 5_15.05:
  * removepkg qt-gstreamer0
- Re-install 'ktown' packages:
  * qt-gstreamer

If you have my 'ktown' set of KDE 5_15.03 installed:
- Remove packages that no longer exist in KDE 5_15.04:
  # removepkg gst1-plugins-base
  # removepkg gst1-plugins-good
  # removepkg gstreamer1
  # removepkg qt-gstreamer1
  # removepkg libmm-qt5
- Re-install original Slackware-current packages that were removed from "deps"
  in KDE 5_15.04 (this will be easiest using slackpkg):
  * LibRaw
  * akonadi
  * attica
  * cmake
  * eigen3
  * exiv2
  * grantlee
  * harfbuzz
  * libfakekey
  * libodfgen
  * librevenge
  * libssh
  * libwpd
  * orc
  * poppler
  * qt
  * shared-desktop-ontologies
  * soprano
  * strigi

Then proceed with installing/upgrading KDE 5 as outlined below.

To make it easy for you, here is a one-line command that downloads the whole
'5' directory (excluding the sources), with 32-bit and 64-bit packages
(and be careful of the 'dot' at the end of that command, it is part of the
commandline !!):

  # rsync -av rsync://alien.slackbook.org/alien/ktown/current/5 .

Or else, if you want to download packages for just one of the two supported
architectures, you would run one of the following commands instead (note that
there is a dot at the end of these commands!).

If you want only the 64-bit packages:
  # rsync -av --exclude=x86 rsync://alien.slackbook.org/alien/ktown/current/5 .
If you want only the 32-bit packages:
  # rsync -av --exclude=x86_64 rsync://alien.slackbook.org/alien/ktown/current/5 .

Assuming you just downloaded the bits you want from the directory tree
"5", you must now change your current directory to where you found this
README (which is the directory called '5').  If you used one of the
above "rsync" commands then you can simply do:

  # cd 5

From within this directory, you run the following commands as root (note that
some of the old KDE package names are obsoleted now, they have been split up,
renamed or integrated and that is the reason for the 'removepkg' lines):

  On Slackware 32-bit:
  # upgradepkg --reinstall --install-new x86/deps/*.t?z
  # upgradepkg --reinstall --install-new x86/deps/telepathy/*.t?z
  # upgradepkg --reinstall --install-new x86/kde/*/*.t?z

  On Slackware 64-bit:
  # upgradepkg --reinstall --install-new x86_64/deps/*.t?z
  # upgradepkg --reinstall --install-new x86_64/deps/telepathy/*.t?z
  # upgradepkg --reinstall --install-new x86_64/kde/*/*.t?z

  If you already have one or more non-english language packs installed:

  On Slackware 32-bit:
  # upgradepkg x86/kdei/*.t?z

  On Slackware 64-bit:
  # upgradepkg x86_64/kdei/*.t?z
  
  If you want to have a non-english language pack installed but none is
  currently installed, substitute your country code instead of the 'XX'
  in the next command:
  # upgradepkg --install-new x86_64/kdei/kde-l10n-XX-*.t?z

  Check if any ".new" configuration files have been left behind by
  the upgradepkg commands.  Compare them to their originals and decide
  if you need to use them.
  # find /etc/ -name "*.new"
  A graphical (ncurses) tool for processing these "*.new" files is slackpkg:
  # slackpkg new-config

Then reboot your system.

==============================================================================
                     Eric Hameleers / alien at slackware dot com / 17-dec-2015
